<!--Copyright (c) 2016 Open Baton (http://www.openbaton.org)

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and

  limitations under the License.-->

<div class="col-lg-12">
    <h1>
        Network Service Descriptors
        <small>Catalogue</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#main"><i class="fa fa-dashboard"></i>
            Overview</a></li>
        <li class="active"><i class="fa fa-pencil-square-o"></i> NS Descriptors
        </li>
    </ol>
</div>
</div>
<div class="row">
    <div class="col-lg-12">
        <button id="deleteMultiple" href="#" ng-disabled="multipleDelete" class="btn btn-danger pull-right"
                ng-style="{'margin-left':'25px'}"
                title="Delete all the items selected" data-target="#deleteModal" data-toggle="modal">Delete
        </button>
        <div class="btn-group right">
            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"> On Board NSD
                <span class="caret"></span></button>
            <ul class="dropdown-menu" role="menu">
                <li>
                    <a href="" ng-click="loadVNFD()">Compose NSD</a>
                <li><a href="" ng-click="loadVNFDUploadNSD()">Upload JSON</a>
                </li>
                <li><a data-target="#modalFileCSAR" data-toggle="modal">Upload CSAR
                </a></li>
            </ul>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12 top-buffer">
        <div uib-alert ng-repeat="alert in alerts" type="{{alert.type}}"  close="closeAlert($index)">
            <div ng-bind-html="alert.msg"></div>
        </div >
        <div class="table-responsive" ng-if="nsdescriptors.length > 0">
            <table ng-table="tableParamspaginationNSD"
                   class="table table-bordered table-striped table-hover tablesorter" id="nsdTabletable">
                <thead>
                <tr>
                    <td><input type="checkbox" ng-model="main.checkbox"></td>
                    <th class="col-sm-4" ng-click="predicate = 'id'; reverse = !reverse">Id <i class="fa fa-sort"></i>
                    </th>
                    <th ng-click="predicate = 'name'; reverse = !reverse">NSD Name <i class="fa fa-sort"></i></th>
                    <th ng-click="predicate = 'vendor'; reverse = !reverse">Vendor <i class="fa fa-sort"></i></th>
                    <th ng-click="predicate = 'version'; reverse = !reverse">Version <i class="fa fa-sort"></i></th>
                    <th ng-click="predicate = 'createdAt'; reverse = !reverse">Created at <i class="fa fa-sort"></i>
                    </th>
                    <th ng-click="predicate = 'updatedAt'; reverse = !reverse">Updated at <i class="fa fa-sort"></i>
                    </th>
                    <th>Actions <i class="fa"></i></th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="nsd in $data | orderBy:predicate:reverse">
                    <td><input type="checkbox" ng-init="selection.ids[nsd.id] = false" ng-model="selection.ids[nsd.id]"
                               name="group"
                               id="{{nsd.id}}"/></td>
                    <td><a href="#nsdescriptors/{{nsd.id}}">{{nsd.id}}</a></td>
                    <td class="text-center">{{nsd.name}}</td>
                    <td class="text-center">{{nsd.vendor}}</td>
                    <td class="text-center">{{nsd.version}}</td>
                    <td class="text-center">{{nsd.createdAt}}</td>
                    <td class="text-center">{{nsd.updatedAt}}</td>
                    <td class="text-center">
                        <div class="btn-group">
                            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"> Action
                                <span class="caret"></span></button>
                            <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a 
                                       ng-click="openLaunchModal(nsd)">Launch</a>
                                <li><a href="" data-toggle="modal" data-target="#editModal"
                                       ng-click="edit(nsd)">Edit</a>
                                </li>
                                <li class="divider"></li>
                                <li><a href="" ng-click="deleteNSD(nsd)">Delete</a></li>
                            </ul>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="modal fade" id="addEditVDU" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Add/Edit a Virtual Deployment Unit</h4>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal">
                    <div class="form-group" ng-repeat="(key,value) in vduCreate" ng-if="key!='lifecycle_event' && key!='monitoring_parameter'
                         && key!='vm_image'&& key!='vnfc' && key!='vimInstanceName'">
                        <label for="{{key}}" class="col-sm-4 control-label">{{key}}</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="{{key}}" name="{{key}}"
                                   ng-model="vduCreate[key]"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="vimInstanceName" class="col-sm-4 control-label">vimInstanceName</label>

                        <div class="col-sm-6">
                            <select name="typeSelect" class="form-control modal-select"
                                    ng-model="vduCreate['vimInstanceName']"
                                    ng-options="vim.name as vim.name for vim in vimInstances | orderBy:'name':false"
                                    ng-change="">
                            </select>
                        </div>
                    </div>
                    <uib-tabset>
                        <uib-tab heading="lifecycle_event" ng-show="showTab(vduCreate.lifecycle_event.length)">
                            {{vduCreate.lifecycle_event}}
                        </uib-tab>
                        <uib-tab heading="monitoring_parameter">
                            <div class="">
                                <div class="">
                                    <h4 class="">
                                        <div class="col-lg-12">Monitoring Parameters
                                            <a class="pull-right" title="Add a New Monitoring Prameter" href=""
                                               ng-click="toggle = !toggle">
                                                <i class="fa fa-plus-square"> Add </i></a>
                                        </div>
                                    </h4>
                                </div>
                                <div ng-init="toggle = false" ng-if="toggle" id="">
                                    <br/>
                                    <br/>
                                    <br/>
                                    <div class="form-group">
                                        <label for="newValue" class="col-sm-4 control-label">new Value</label>
                                        <div class="col-sm-6">
                                            <div class="form-group input-group">
                                                <input class="form-control" type="text" ng-model="newValue">
                                                <span class="input-group-btn">
                                                <button class="btn btn-default" type="button"
                                                        ng-click="saveValueMP(newValue)"
                                                ><i class="fa fa-floppy-o"></i>
                                                </button>
                                            </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br/>
                            <ul class="col-lg-offset-3"
                                ng-repeat="mp in vduCreate.monitoring_parameter track by $index">
                                <li>{{mp}} <a href="" ng-click="deleteMP($index)"><i class="fa fa-trash-o"></i></a></li>
                            </ul>
                        </uib-tab>
                        <uib-tab heading="vm_image">
                            <div class="">
                                <div class="">
                                    <h4 class="">
                                        <div class="col-lg-12">Virtual Machine Images
                                            <a class="pull-right" title="Add a New VMI" href=""
                                               ng-click="toggle = !toggle">
                                            </a>
                                        </div>
                                    </h4>
                                    <div class="col-lg-offset-2" ng-repeat="vim in vimInstances">

                                        <div ng-if="vim.name==vduCreate.vimInstanceName"
                                             ng-repeat="image in vim.images">
                                            <input type="checkbox" name="selectedImages[]" value="{{image.name}}"
                                                   ng-checked="selection.indexOf(image.name) > -1"
                                                   ng-click="toggleSelection(image.name)"> {{image.name}}
                                        </div>
                                    </div>
                                </div>
                                <div ng-init="toggle = false" ng-if="toggle" id="">
                                    <br/>
                                    <br/>
                                    <br/>
                                </div>
                            </div>
                            <br/>
                            <ul class="col-lg-offset-3" ng-repeat="vmi in vduCreate.vm_image track by $index">
                                <li>{{vmi}} <a href="" ng-click="deleteVMI($index)"><i class="fa fa-trash-o"></i></a>
                                </li>
                            </ul>
                        </uib-tab>
                        <uib-tab heading="vnfc" ng-show="showTab(vduCreate.vnfc.length)">
                            {{vduCreate.vnfc}}
                        </uib-tab>
                    </uib-tabset>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close
                </button>
                <button type="button" id="editAddVDU" ng-click="addVDUtoVND()" class="btn btn-primary">Save VDU
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modaladdDepFlavour" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Add/Edit a Deployment Unit</h4>
            </div>
            <div class="modal-body">
                <form role="form" id="form4" class="form-horizontal">
                    <div class="form-group" ng-repeat="(key,value) in depFlavor"
                         ng-if="key!='df_constraint' && key!='costituent_vdu'">
                        <label for="{{key}}" class="col-sm-4 control-label">{{key}}</label>

                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="{{key}}" name="{{key}}"
                                   ng-model="depFlavor[key]"/>
                        </div>
                    </div>
                    <uib-tabset>
                        <uib-tab heading="costituent_vdu">
                            <div class="">
                                <div class="">
                                    <h4 class="">
                                        <div class="col-lg-12">Costituent VDU
                                            <a class="pull-right" title="Add a New costituent_vdu" href=""
                                               ng-click="toggle = !toggle">
                                                <i class="fa fa-plus-square"> Add </i></a>
                                        </div>
                                    </h4>
                                </div>
                                <div ng-init="toggle = false" ng-if="toggle" id="">
                                    <br/>
                                    <br/>
                                    <br/>

                                    <div class="form-group">
                                        <label for="newValue" class="col-sm-4 control-label">new Value</label>
                                        <div class="col-sm-6">
                                            <div class="form-group input-group">
                                                <input class="form-control" type="text" ng-model="newValue">
                                                <span class="input-group-btn">
                                                <button class="btn btn-default" type="button"
                                                        ng-click="saveValueDFC(newValue)"
                                                ><i class="fa fa-floppy-o"></i>
                                                </button>
                                            </span>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>
                            <br/>
                            <ul class="col-lg-offset-3" ng-repeat="dfc in depFlavor.df_constraint track by $index">
                                <li>{{dfc}} <a href="" ng-click="deleteDFC($index)"><i class="fa fa-trash-o"></i></a>
                                </li>
                            </ul>
                        </uib-tab>
                        <uib-tab heading="df_constraint">
                            <div class="">
                                <div class="">
                                    <h4 class="">
                                        <div class="col-lg-12">DF Constraint
                                            <a class="pull-right" title="Add a New df_constraint" href=""
                                               ng-click="toggle = !toggle">
                                                <i class="fa fa-plus-square"> Add </i></a>
                                        </div>
                                    </h4>
                                </div>
                                <div ng-init="toggle = false" ng-if="toggle" id="">
                                    <br/>
                                    <br/>
                                    <br/>
                                    <div class="form-group">
                                        <label for="newValue" class="col-sm-4 control-label">new Value</label>

                                        <div class="col-sm-6">
                                            <div class="form-group input-group">
                                                <input class="form-control" type="text" ng-model="newValue">
                                                <span class="input-group-btn">
                                                <button class="btn btn-default" type="button"
                                                        ng-click="saveValueCVDU(newValue)"
                                                ><i class="fa fa-floppy-o"></i>
                                                </button>
                                            </span>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>
                            <br/>
                            <ul class="col-lg-offset-3" ng-repeat="c_vdu in depFlavor.costituent_vdu track by $index">
                                <li>{{c_vdu}} <a href="" ng-click="deleteCVDU($index)"><i class="fa fa-trash-o"></i></a>
                                </li>
                            </ul>
                        </uib-tab>
                    </uib-tabset>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close
                </button>
                <button type="button" id="storeDF" ng-click="storeDepFlavour()" class="btn btn-primary">Store DFlavour
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addEditVNDF" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Add/Edit a Virtual Network Function Descriptor</h4>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal">
                    <div class="form-group" ng-repeat="(key,value) in vnfdCreate" ng-if="key!='auto_scale_policy' && key!='connection_point' && key!='connection_point'
                         && key!='monitoring_parameter' && key!='vdu'&& key!='vdu_dependency'
                         && key!='deployment_flavour' && key!='lifecycle_event'&& key!='virtual_link' && key!='lifecycle_event'">
                        <label for="{{key}}" class="col-sm-4 control-label">{{key}}</label>

                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="{{key}}" name="{{key}}"
                                   ng-model="vnfdCreate[key]"/>
                        </div>
                    </div>
                    <uib-tabset>
                        <uib-tab class="" heading="auto_scale_policy"
                             ng-show="showTab(vnfdCreate.auto_scale_policy.length)">
                            {{vnfdCreate.auto_scale_policy}}
                        </uib-tab>
                        <uib-tab class="" heading="connection_point" ng-show="showTab(vnfdCreate.connection_point.length)">
                            {{vnfdCreate.connection_point}}
                        </uib-tab>
                        <uib-tab class="" heading="monitoring_parameter">
                            <div class="">
                                <div class="">
                                    <h4 class="">
                                        <div class="col-lg-12">Monitoring Parameters
                                            <a class="pull-right" title="Add a New Monitoring Prameter" href=""
                                               ng-click="toggle = !toggle">
                                                <i class="fa fa-plus-square"> Add </i></a>
                                        </div>
                                    </h4>
                                </div>
                                <div ng-init="toggle = false" ng-if="toggle" id="">
                                    <br/>
                                    <br/>
                                    <br/>
                                    <div class="form-group">
                                        <label for="newValue" class="col-sm-4 control-label">new Value</label>

                                        <div class="col-sm-6">
                                            <div class="form-group input-group">
                                                <input class="form-control" type="text" ng-model="newValue">
                                                <span class="input-group-btn">
                                                <button class="btn btn-default" type="button"
                                                        ng-click="saveValueMPfromVNFD(newValue)"
                                                ><i class="fa fa-floppy-o"></i>
                                                </button>
                                            </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br/>
                            <ul class="col-lg-offset-3"
                                ng-repeat="mp in vnfdCreate.monitoring_parameter track by $index">
                                <li>{{mp}} <a href="" ng-click="deleteMPfromVNFD($index)"><i class="fa fa-trash-o"></i></a>
                                </li>
                            </ul>
                        </uib-tab>
                        <uib-tab class="" heading="vdu">
                            <div class="">
                                <div class="">
                                    <h4 class="">
                                        <div class="col-lg-12">Virtual Descriptor Unit
                                            <a class="pull-right" title="Add a New VDU" href="" ng-click="addVDU()">
                                                <i class="fa fa-plus-square"> Add </i></a>
                                        </div>
                                    </h4>
                                </div>
                            </div>
                            <br/>
                            <br/>
                            <div class="row">
                                <div class="" ng-style="{'padding-left':'40px','padding-right':'40px'}"
                                     ng-repeat="vdu in vnfdCreate.vdu track by $index">

                                    <div class="row">
                                        <spam ng-repeat="(key,value) in vdu" ng-if="!isEmpty(value)">
                                            <b>{{key}}</b>: {{value}}
                                            <spam ng-if="!$last"><br/></spam>
                                        </spam>
                                        <div class="pull-right">
                                            <a href="" title="Edit VDU" ng-click="editVDU(vdu,$index)">
                                                <i class="fa fa-pencil-square"> &nbsp; &nbsp;</i></a>
                                            <a href="" title="Delete VDU" ng-click="deleteVDU($index)">
                                                <i class="fa fa-trash-o"> </i></a>
                                        </div>
                                    </div>
                                    <hr class="hr_title"/>
                                </div>
                            </div>
                        </uib-tab>
                        <uib-tab class="" heading="vdu_dependency" ng-show="showTab(vnfdCreate.vdu_dependency.length)">
                            {{vnfdCreate.vdu_dependency}}
                        </uib-tab>
                        <uib-tab class="" heading="deployment_flavour">
                            <h4 class="">
                                <div class="col-lg-12">Deployment Flavour
                                    <a class="pull-right" title="Add a New Deployment Flavour" href=""
                                       ng-click="addDepFlavour()">
                                        <i class="fa fa-plus-square"> Add </i></a>
                                </div>
                            </h4>
                            <br/>
                            <br/>
                            <div class="row">
                                <div class="" ng-style="{'padding-left':'40px','padding-right':'40px'}"
                                     ng-repeat="df in vnfdCreate.deployment_flavour track by $index">

                                    <div class="row">
                                        <spam ng-repeat="(key,value) in df" ng-if="!isEmpty(value)">
                                            <b>{{key}}</b>: {{value}}
                                            <spam ng-if="!$last"><br/></spam>
                                        </spam>
                                        <div class="pull-right">
                                            <a href="" title="Edit this Deployment Flavour"
                                               ng-click="editDF(df,$index)">
                                                <i class="fa fa-pencil-square"> &nbsp; &nbsp;</i></a>
                                            <a href="" title="Delete this Deployment Flavour"
                                               ng-click="deleteDF($index)">
                                                <i class="fa fa-trash-o"> </i></a>
                                        </div>
                                    </div>
                                    <hr class="hr_title"/>
                                </div>
                            </div>
                        </uib-tab>
                        <uib-tab class="" heading="lifecycle_event" ng-show="showTab(vnfdCreate.lifecycle_event.length)">
                            <h4 class="">
                                <div class="col-lg-12">Lifecycle Event
                                    <a class="pull-right" title="Add a New Lifecycle Event" href=""
                                       ng-click="addLifecycleEvent()">
                                        <i class="fa fa-plus-square"> Add </i></a>
                                </div>
                            </h4>
                            <br/>
                            <br/>
                            <div class="row">
                                <div class="" ng-style="{'padding-left':'40px','padding-right':'40px'}"
                                     ng-repeat="le in vnfdCreate.lifecycle_event track by $index">

                                    <div class="row">
                                        <spam ng-repeat="(key,value) in le" ng-if="!isEmpty(value)">
                                            <b>{{key}}</b>: {{value}}
                                            <spam ng-if="!$last"><br/></spam>
                                        </spam>
                                        <div class="pull-right">
                                            <a href="" title="Edit this Lifecycle Event"
                                               ng-click="editLEfromVNFD(le,$index)">
                                                <i class="fa fa-pencil-square"> &nbsp; &nbsp;</i></a>
                                            <a href="" title="Delete this Lifecycle Event"
                                               ng-click="deleteLEfromVNFD($index)">
                                                <i class="fa fa-trash-o"> </i></a>
                                        </div>
                                    </div>
                                    <hr class="hr_title"/>
                                </div>
                            </div>
                        </uib-tab>
                        <uib-tab class="" heading="virtual_link" ng-show="showTab(vnfdCreate.virtual_link.length)">
                            {{vnfdCreate.virtual_link}}
                        </uib-tab>
                    </uib-tab>
                    <!--{{vnfdCreate}}-->
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close
                </button>
                <button type="button" id="editAddNVNFD" ng-click="sendVNFD()" class="btn btn-primary">Save VNFD
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="modalCreateNSD" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">On Board a Network Service Descriptor</h4>
            </div>
            <div class="modal-body">
                <div class="container" style="width: 100%">
                    <ul class="nav nav-pills CompsNSD nav-stacked col-md-3">
                        <li class="active"><a href="#generalInfo" data-toggle="pill">General Information</a></li>
                        <li><a href="#VNFDSelection" data-toggle="pill">Virtual Network Function(s)</a></li>
                        <li><a href="#vldSelection" data-toggle="pill">Virtual Links</a></li>
                    </ul>

                    <div class="tab-content col-md-9">

                        <div class="tab-pane active" id="generalInfo">
                            Compose your Network Service Descriptor choosing VNFDs already present in the Catalogue.
                            <br>
                            <br>
                            <button ng-if="data.serviceContainers.length == 0" class="btn btn-default"
                                    data-toggle="modal"
                                    data-target="#addContainerModal">Add Container
                            </button>
                            <form class="form-horizontal" role="form" id="formAddService">
                                <div class="form-group">
                                    <span for="name" class="col-sm-2 control-label leftalign">Name</span>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control leftalign" id="name" name="name"
                                               ng-model="nsdCreateTmp.name"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <span for="vendor" class="col-sm-2 control-label leftalign">Vendor</span>

                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="vendor" name="vendor"
                                               ng-model="nsdCreateTmp.vendor"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <span for="version" class="col-sm-2 control-label leftalign">Version</span>

                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" id="version" name="version"
                                               ng-model="nsdCreateTmp.version"/>
                                    </div>
                                </div>

                            </form>
                        </div>
                        <div class="tab-pane" id="VNFDSelection">
                            <div class="input-group">
                                <span>VNFDs Catalogue</span>
                                <select name="typeSelect" class="form-control input-margintop" ng-model="selectedVNFD"
                                        ng-options="vnfd.name + '/' + vnfd.vendor + '/' + vnfd.version for vnfd in vnfdList| orderBy:'itemKey':false">
                                </select>
                                <span class="input-group-btn">
                            <button class="btn btn-success radiusnone" ng-click="addTONSD(selectedVNFD)" type="button"
                                    title="Add this VNFD to NSD" ng-style="{'margin-top':'25px'}">
                                <span class="fa fa-plus" aria-hidden="true"></span>
                                </button>
                                </span>
                            </div>
                            <div ng-if="selectedVNFD">
                                <div class="" ng-if="tmpVnfd.length > 0">

                                    <h3>VNFDs already selected</h3>
                                    <table class="table table-condensed table-bordered">
                                        <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Type</td>
                                            <td>Endpoint</td>
                                            <td class="text-center">Delete</td>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="vnfd in tmpVnfd track by $index">
                                            <td>{{vnfd.name}}</td>
                                            <td>{{vnfd.type}}</td>
                                            <td>{{vnfd.endpoint}}</td>
                                            <td class="text-center"><a href=""
                                                                       ng-click="deleteVNFDfromNSD($index)"><span
                                                    class="fa fa-trash"></span></a>
                                            </td>
                                        <tr>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="panel-group" ng-if="nsdCreateTmp.vnfd.length > 0" id="accordion2">

                                    <div class="panel panel-default">
                                        <div class="panel-heading" style="padding: 5px 15px;">
                                            <h4 class="panel-title">
                                                <a style="font-size: 14px;" class="accordion-toggle"
                                                   data-toggle="collapse" data-parent="#accordion"
                                                   href="#AddDependency">
                                                    Add new dependency
                                                </a>
                                            </h4>
                                        </div>
                                        <div id="AddDependency" class="panel-collapse collapse" style="padding: 20px;">
                                            <span>
                                                <div class="collapse-chevron">
                                                    <a data-toggle="collapse" class="collapsed"
                                                       href="#Dependencies">
                                                        <span class="glyphicon glyphicon-chevron-down"
                                                              aria-hidden="true"></span>
                                                       Add Dependencies</a>
                                                    <div class="collapse" id="Dependencies">
                                                       <form role="form" class="form-horizontal" id="form7">
                                                    <div>
                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <div class="col-sm-6">
                                                                    <label class="control-label"
                                                                           ng-init=""> Source</label>
                                                                    <select name="typeSelect"
                                                                            class="form-control modal-select"
                                                                            ng-model="dependency.source.name"
                                                                            ng-options="vnfd.name as vnfd.name for vnfd in tmpVnfd"
                                                                            ng-change="">
                                                                    </select>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <label class="control-label"
                                                                           ng-init=""> Target:</label>
                                                                    <select name="typeSelect"
                                                                            class="form-control modal-select"
                                                                            ng-model="dependency.target.name"
                                                                            ng-options="vnfd.name as vnfd.name for vnfd in tmpVnfd"
                                                                            ng-change="">
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <div class="col-sm-6">
                                                                    <label for="newValue" class="control-label">Parameters</label>
                                                                        <div class="input-group">
                                                                            <input class="form-control" type="text"
                                                                                   ng-model="newValue">
                                                                            <span class="input-group-btn">
                                                <button class="btn" type="button" style="padding-left: 10px;"
                                                        ng-click="addParam(newValue)"
                                                ><span class="fa fa-plus" aria-hidden="true"></span></i>
                                                </button>
                                            </span>
                                                                        </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <br>
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <table class="table table-bordered">
                                                                    <thead>
                                                                    <tr>
                                                                        <td>Parameters</td>
                                                                        <td class="text-center">Action</td>
                                                                    </tr>
                                                                    </thead>
                                                                    <tr ng-repeat="par in dependency.parameters track by $index">
                                                                        <td>
                                                                            {{par}}
                                                                        </td>
                                                                        <td class="text-center">
                                                                            <a href=""
                                                                               ng-click="removeParam($index)"><span
                                                                                    class="fa fa-trash"></span></a>
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                                <button type="button" ng-click="saveDependency()"
                                                        class="btn btn-primary right">Save Dependency
                                                </button>
                                                    </div>
                                                </div>
                                            </span>
                                            <h3>Dependencies</h3>
                                            <table class="table table-condensed table-bordered">
                                                <thead>
                                                <tr>
                                                    <td>Source</td>
                                                    <td>Target</td>
                                                    <td>Parameters</td>
                                                    <td>Delete</td>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr ng-repeat="dependency in nsdCreateTmp.vnf_dependency track by $index">
                                                    <td>{{dependency.source.name}}</td>
                                                    <td>{{dependency.target.name}}</td>
                                                    <td>{{dependency.parameters}}</td>
                                                    <td><a href="" ng-click="deleteDependency($index)"><span
                                                            class="fa fa-trash"></span></a>
                                                    </td>

                                                <tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                        <div class="tab-pane" id="vldSelection">
                            <span style="margin-bottom: 10px;">VLDs Catalogue</span>
                            <div class="form-group">
                                <label style="display: none;" for="vld" class=" control-label"></label>
                                <div class="form-group input-group">
                                    <input class="form-control input-margintop" type="text" ng-model="vld" id="vld">
                                    <span class="input-group-btn">
                                                <button class="btn btn-success radiusnone" type="button"
                                                        ng-click="addVld(vld)" title="Add this Virtual Link Descriptor"
                                                ><i class="fa fa-floppy-o"></i>
                                                </button>
                                            </span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <table class="col-md-12" ng-hide="vld.length < 1">
                                        <thead>
                                        <tr>
                                            <td>Virtual Link Descriptor Name</td>
                                            <td class="text-center">Action</td>
                                        </tr>
                                        </thead>
                                        <tr ng-repeat="vld in nsdCreateTmp.vld track by $index">
                                            <td>
                                                {{vld.name}}
                                            </td>
                                            <td class="text-center">
                                                <a href="" ng-click="removeVld($index)"><span
                                                        class="fa fa-trash"></span></a>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div><!-- tab content -->
                </div>
            </div>
            <div class="modal-footer">
                <a class="btn btnPreviousCompsNSD"
                   ng-disabled="createNSDfirstStep==='' || LastTabCompsNSD==='General Information' || LastTabCompsNSD=== undefined">Back</a>
                <a class="btn btn-primary btnNextCompNSD" ng-disabled="LastTabCompsNSD==='Virtual Links'">Next</a>
                <button type="button" id="addService" class="btn btn-primary"
                        ng-disabled="nsdCreateTmp.name.length < 1 || nsdCreateTmp.vendor.length < 1 || nsdCreateTmp.vnfd.length < 1"
                        ng-click="sendNSDCreate()">Create
                    NSD
                </button>
                <button type="button" id="closeModal" class="btn left btn-danger" data-dismiss="modal">Close
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="modalCreateNSDUploadjson" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header panel-heading">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <span class="modal-title" id="serviceFormLabel">Add a Network Service Descriptor</span>
            </div>
            <uib-tabset class="dailougebox">
                <uib-tab heading="Upload NSD">
                    <div class="modal-header">
                        <h4 class="modal-title">Save a Network Service Descriptor</h4>
                        Here you can add an NSD via pasting the json or choosing a file. The NSD can contain either the
                        whole VNFDs or their ids.
                    </div>
                    <div class="modal-body">
                        <form role="form" id="formJson">
                            <div class="form-group">

                                <br> <label for="jsonInputArea">Insert Your Json</label>
                                <textarea name="textTopologyJson" ng-model="textTopologyJson"
                                          ng-change="changeText(textTopologyJson)" id="jsonInputArea"
                                          class="form-control verticalresize" rows="5" placeholder="{ }"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="jsonInputFile">File input</label>
                                <input type="file" id="jsonInputFile"
                                       onchange="angular.element(this).scope().setFile(this)">

                                <p class="help-block">Example: NetworkServiceDescriptor.json </p>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close
                        </button>
                        <button type="button" id="storeNSD" ng-click="sendFile(textTopologyJson)"
                                class="btn btn-primary">Upload NSD
                        </button>
                    </div>
                </uib-tab>
                <!--modal-content-->
        </div>
        <!--modal-dialog-->
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="editModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Edit</h4>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal">
                    <div class="form-group" ng-repeat="(key,value) in editObj"
                         ng-if="key!='id' && isArray(value) && key!='hbVersion' && key!='shared' && key!='projectId' && key!='enabled' && key!='updatedAt' && key!='createdAt'">
                        <label for="{{key}}" class="col-sm-4 control-label">{{key}}</label>

                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="{{key}}" name="{{key}}"
                                   ng-model="editObj[key]"/>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" ng-click="updateObj()">Update</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
<div class="modal fade" tabindex="-1" role="dialog" id="deleteModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Delete Alert</h4>
            </div>
            <div class="modal-body">
                <p>You have selected:</p>
                <ul ng-repeat="(k,v) in selection.ids" ng-if="v">
                    <li>{{k}}</li>
                </ul>
                <p>Please confirm your selection.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" ng-click="multipleDeleteReq()" data-dismiss="modal">
                    Delete
                </button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="modalFileCSAR" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">On Board NSD as CSAR archive</h4>
            </div>
            <div class="modal-body">
                <form role="form" id="my-dropzone" class="">
                    <h4>Drag and drop files below</h4>

                    <div class="upload-drop-zone dz-clickable dz-default dz-message" id="drop-zone">
                        Just drag and drop files here
                    </div>

                    <div class="table table-striped" class="files" id="previews">

                        <div id="template" class="file-row">
                            <!-- This is used as the file preview template -->
                            <div>
                                <span class="preview"><img data-dz-thumbnail/></span>
                            </div>
                            <div>
                                <p class="name" data-dz-name></p>
                                <strong class="error text-danger" data-dz-errormessage></strong>
                            </div>
                            <div>
                                <p class="size" data-dz-size></p>

                                <div id="total-progress" class="progress progress-striped active" role="progressbar"
                                     aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                                    <div class="progress-bar progress-bar-success" style="width:0%;"
                                         data-dz-uploadprogress></div>
                                </div>
                            </div>
                            <div>
                                <button data-dz-remove class="btn btn-warning cancel">
                                    <i class="glyphicon glyphicon-ban-circle"></i>
                                    <span>Cancel</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">Close
                </button>
                <button type="button" id="submit-all" class="btn btn-primary">Upload All</button>
            </div>
        </div>
    </div>
</div>

<style type="text/css">
    .app-nsdlaunch-modal-window .modal-dialog {
    width: 70%;
}
</style>